/*!
 * The Sutton SignWriting Web Components
 */
import{d as t,e}from"./p-61fe031a.js";var n=t((function(t,e){!function(t){let e={symbol:"S[123][0-9a-f]{2}[0-5][0-9a-f]",coord:"[0-9]{3}x[0-9]{3}",sort:"A",box:"[BLMR]"};e.prefix=`(?:${e.sort}(?:${e.symbol})+)`,e.spatial=`${e.symbol}${e.coord}`,e.signbox=`${e.box}${e.coord}(?:${e.spatial})*`,e.sign=`${e.prefix}?${e.signbox}`,e.sortable=`${e.prefix}${e.signbox}`;let n={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};n.colorbase=`(?:${n.colorhex}|${n.colorname})`,n.color=`_${n.colorbase}_`,n.colors=`_${n.colorbase}(?:,${n.colorbase})?_`,n.background=`G${n.color}`,n.detail=`D${n.colors}`,n.detailsym=`D[0-9]{2}${n.colors}`,n.classes=`${n.classbase}(?: ${n.classbase})*`,n.full=`-(${n.colorize})?(${n.padding})?(${n.background})?(${n.detail})?(${n.zoom})?(?:-((?:${n.detailsym})*))?(?:-(${n.classes})?!(?:(${n.id})!)?)?`;const o=t=>(new RegExp(`^${n.colorhex}$`).test(t)?"#":"")+t,i=t=>{const e=("string"==typeof t?t.match(new RegExp(`^${n.full}`)):[])||[];return i={colorize:e[1]?!!e[1]:void 0,padding:e[2]?parseInt(e[2].slice(1)):void 0,background:e[3]?o(e[3].slice(2,-1)):void 0,detail:e[4]?e[4].slice(2,-1).split(",").map(o):void 0,zoom:e[5]?"Zx"===e[5]?"x":parseFloat(e[5].slice(1)):void 0,detailsym:e[6]?e[6].match(new RegExp(n.detailsym,"g")).map((t=>{const e=t.split("_"),n=e[1].split(",").map(o);return{index:parseInt(e[0].slice(1)),detail:n}})):void 0,classes:e[7]?e[7]:void 0,id:e[8]?e[8]:void 0},Object.fromEntries(Object.entries(i).filter((([t,e])=>void 0!==e)));var i},r=t=>t.split("x").map((t=>parseInt(t))),s={symbol:t=>{const o="string"==typeof t?t.match(new RegExp(`^(${e.symbol})(${e.coord})?(${n.full})?`)):void 0;return{symbol:o?o[1]:void 0,coord:o&&o[2]?r(o[2]):void 0,style:o?o[3]:void 0}},sign:t=>{const o="string"==typeof t?t.match(new RegExp(`^(${e.prefix})?(${e.signbox})(${n.full})?`)):void 0;return o?{sequence:o[1]?o[1].slice(1).match(/.{6}/g):void 0,box:o[2][0],max:r(o[2].slice(1,8)),spatials:o[2].length<9?void 0:o[2].slice(8).match(/(.{13})/g).map((t=>({symbol:t.slice(0,6),coord:[parseInt(t.slice(6,9)),parseInt(t.slice(10,13))]}))),style:o[3]}:{}},text:t=>{if("string"!=typeof t)return[];const o=t.match(new RegExp(`(${e.sign}(${n.full})?|${e.spatial}(${n.full})?)`,"g"));return o?[...o]:[]}},l={symbol:t=>{if("string"==typeof t.symbol){const o=(t.symbol.match(e.symbol)||[""])[0];if(o)return o+((((t.coord&&t.coord[0]||"").toString()+"x"+(t.coord&&t.coord[1]||"").toString()).match(e.coord)||[""])[0]||"")+("string"==typeof t.style&&(t.style.match(n.full)||[""])[0]||"")}},sign:t=>{let o="string"!=typeof t.box?"M":(t.box+"M").match(e.box);const i=(((t.max&&t.max[0]||"").toString()+"x"+(t.max&&t.max[1]||"").toString()).match(e.coord)||[""])[0]||"";if(!i)return;let r="";t.sequence&&Array.isArray(t.sequence)&&(r=t.sequence.map((t=>(t.match(e.symbol)||[""])[0])).join(""),r=r?"A"+r:"");let s="";return t.spatials&&Array.isArray(t.spatials)&&(s=t.spatials.map((t=>{if("string"==typeof t.symbol){const n=(t.symbol.match(e.symbol)||[""])[0];if(n){const o=(((t.coord&&t.coord[0]||"").toString()+"x"+(t.coord&&t.coord[1]||"").toString()).match(e.coord)||[""])[0]||"";if(o)return n+o}}return""})).join("")),r+o+i+s+("string"==typeof t.style&&(t.style.match(n.full)||[""])[0]||"")}},a=t=>{let e,n,o,r,l,a,c,$,f=s.sign(t);f.spatials?(r=Math.min(...f.spatials.map((t=>t.coord[0]))),l=f.max[0],e=l-r,a=Math.min(...f.spatials.map((t=>t.coord[1]))),c=f.max[1],n=c-a,o="sign",$=f.box):(f=s.symbol(t),$="M",f.coord?(r=f.coord[0],e=2*(500-r),a=f.coord[1],n=2*(500-a),o="symbol"):(r=490,e=20,a=490,n=20,o="none"));let g=i(f.style);return{minX:r,minY:a,width:e,height:n,segment:o,lane:{B:0,L:-1,M:0,R:1}[$],padding:g.padding||0,zoom:g.zoom||1}},c={height:500,width:150,offset:50,pad:20,margin:5,dynamic:!1,background:void 0,punctuation:{spacing:!0,pad:30,pull:!0},style:{detail:["black","white"],zoom:1}},$=t=>("object"!=typeof t&&(t={}),{...c,...t,punctuation:{...c.punctuation,...t.punctuation},style:{...c.style,...t.style}}),f=[256,517,759,767,877,895,903],g={all:[256,907],writing:[256,894],hand:[256,516],movement:[517,758],dynamic:[759,766],head:[767,876],hcenter:[767,876],vcenter:[767,885],trunk:[877,885],limb:[886,894],location:[895,902],punctuation:[903,907]},d=["#0000CC","#CC0000","#FF0099","#006600","#000000","#884411","#FF9900"];t.category=f,t.colorize=t=>{const e=s.symbol(t);let n="#000000";if(e.symbol){const t=parseInt(e.symbol.slice(1,4),16),o=f.findIndex((e=>e>t));n=d[o<0?6:o-1]}return n},t.colors=d,t.columnDefaults=c,t.columnDefaultsMerge=$,t.columns=(t,e)=>{if("string"!=typeof t)return{};const n=$(e);let o=s.text(t),i=0,r=[],l=[],c=0,f=parseInt(n.width/2),g=n.height-n.margin,d=!0,p=!1;for(let t of o){let e=a(t);i+=c,i+=n.punctuation.spacing?"sign"==e.segment?n.pad:0:n.pad,p=i+e.height>g,p&&"symbol"==e.segment&&n.punctuation.pull&&d&&(p=!1,d=!1),0==l.length&&(p=!1),p&&(i=n.pad,r.push(l),l=[],d=!0),l.push(Object.assign(e,{x:f+n.offset*e.lane-(500-e.minX)*e.zoom*n.style.zoom,y:i,text:t})),i+=e.height*e.zoom*n.style.zoom,c=n.punctuation.spacing?"sign"==e.segment?n.pad:n.punctuation.pad:n.pad}if(l.length&&r.push(l),n.punctuation.pull)for(let t of r){let e=t[t.length-1],o=e.y+e.height-(n.height-n.margin);if(o>0){let e=parseInt(o/t.length)+1;for(let n in t)t[n].y-=e*n+e}}let u=[];for(let t of r){let e=[f-n.offset-n.pad],o=[f+n.offset+n.pad];for(let i of t)e.push(i.x-n.pad),o.push(i.x+i.width+n.pad);e=Math.min(...e),o=Math.max(...o);let i=n.width,r=0;n.dynamic?(i=o-e,r=-e):r=f-parseInt((e+o)/2);for(let e of t)e.x+=r;u.push(i)}return{options:n,widths:u,columns:r}},t.compose=l,t.group=[256,270,286,324,332,390,420,442,461,501,517,534,554,597,613,648,678,695,725,739,759,767,778,810,827,857,877,886,895,903],t.info=a,t.isType=(t,e)=>{const n=s.symbol(t);if(n.symbol){const t=parseInt(n.symbol.slice(1,4),16),o=g[e];if(o)return o[0]<=t&&o[1]>=t}return!1},t.kind=[256,895,903],t.parse=s,t.ranges=g,t.re=e,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),o=t((function(t,e){!function(t){const e=t=>1+96*(parseInt(t.slice(1,4),16)-256)+16*parseInt(t.slice(4,5),16)+parseInt(t.slice(5,6),16);let n={};const o=152;let i;const r=function(t){return function(t){if(t in n)return[...n[t]];if(!i){const t=document.createElement("canvas");t.width=o,t.height=o,i=t.getContext("2d")}i.clearRect(0,0,o,o),i.font="60px 'SuttonSignWritingLine'",i.fillText(String.fromCodePoint(t+983040),0,0);const e=i.getImageData(0,0,o,o).data;let r,s,l,a;t:for(r=151;r>=0;r--)for(s=0;s<o;s+=1)for(a=0;a<4;a+=1)if(l=4*r+4*s*o+a,e[l])break t;var c=r;t:for(s=151;s>=0;s--)for(r=0;r<c;r+=1)for(a=0;a<4;a+=1)if(l=4*r+4*s*o+a,e[l])break t;var $=s+1;if(c=Math.ceil(c/2),$=Math.ceil($/2),14394==t&&(c=19),[10468,10480,10496,10512,10500,10532,10548,10862,10878,10894,11058,11074,11476,11488,11492,11504,11508,11520,10516,10910,10926,11042,11082,10942].includes(t)&&(c=20),31921==t&&(c=22),38460==t&&(c=23),[20164,20212].includes(t)&&(c=25),31894==t&&(c=28),46698==t&&(c=29),29606==t&&(c=30),44855==t&&(c=40),32667==t&&(c=50),[11088,11474,11490,11506].includes(t)&&($=20),6285==t&&($=21),40804==t&&($=31),41475==t&&($=36),0==c&&0==$){const e={9:[15,30],10:[21,30],11:[30,15],12:[30,21],13:[15,30],14:[21,30]};t in e&&(c=e[t][0],$=e[t][1])}return 0!=c||0!=$?(n[t]=[c,$],[c,$]):void 0}(e(t))},s=function(t){return String.fromCodePoint(t+983040)},l=function(t){return String.fromCodePoint(t+1048576)},a=function(t){return s(e(t))},c=function(t){return l(e(t))},$=function(t){return n=e(t),`    <text class="sym-fill" fill="white" style="pointer-events:none;font-family:'SuttonSignWritingFill';font-size:30px;">${l(n)}</text>\n    <text class="sym-line" fill="black" style="pointer-events:none;font-family:'SuttonSignWritingLine';font-size:30px;">${s(n)}</text>`;var n};let f={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};f.colorbase=`(?:${f.colorhex}|${f.colorname})`,f.color=`_${f.colorbase}_`,f.colors=`_${f.colorbase}(?:,${f.colorbase})?_`,f.background=`G${f.color}`,f.detail=`D${f.colors}`,f.detailsym=`D[0-9]{2}${f.colors}`,f.classes=`${f.classbase}(?: ${f.classbase})*`,f.full=`-(${f.colorize})?(${f.padding})?(${f.background})?(${f.detail})?(${f.zoom})?(?:-((?:${f.detailsym})*))?(?:-(${f.classes})?!(?:(${f.id})!)?)?`;const g=t=>(new RegExp(`^${f.colorhex}$`).test(t)?"#":"")+t,d=t=>{const e=("string"==typeof t?t.match(new RegExp(`^${f.full}`)):[])||[];return n={colorize:e[1]?!!e[1]:void 0,padding:e[2]?parseInt(e[2].slice(1)):void 0,background:e[3]?g(e[3].slice(2,-1)):void 0,detail:e[4]?e[4].slice(2,-1).split(",").map(g):void 0,zoom:e[5]?"Zx"===e[5]?"x":parseFloat(e[5].slice(1)):void 0,detailsym:e[6]?e[6].match(new RegExp(f.detailsym,"g")).map((t=>{const e=t.split("_"),n=e[1].split(",").map(g);return{index:parseInt(e[0].slice(1)),detail:n}})):void 0,classes:e[7]?e[7]:void 0,id:e[8]?e[8]:void 0},Object.fromEntries(Object.entries(n).filter((([t,e])=>void 0!==e)));var n},p=t=>{if("object"!=typeof t||null===t)return;let e="-";e+=t.colorize?"C":"";const n=parseInt(t.padding);e+=!n||n<=0||n>99?"":"P"+(n>9?n:"0"+n);const o=t.background&&"string"==typeof t.background?t.background.match(f.colorbase)[0]:void 0;e+=o?"G_"+o+"_":"";const i=t.detail&&t.detail[0]&&"string"==typeof t.detail[0]?t.detail[0].match(f.colorbase)[0]:void 0,r=t.detail&&t.detail[1]&&"string"==typeof t.detail[1]?t.detail[1].match(f.colorbase)[0]:void 0;i&&(e+="D_"+i,r&&(e+=","+r),e+="_");const s="x"===t.zoom?"x":parseFloat(t.zoom);e+=!s||s<=0?"":"Z"+s;let l="";l+=(t.detailsym&&Array.isArray(t.detailsym)?t.detailsym.map((t=>{const e=parseInt(t.index);if(!e||e<=0||e>99)return"";let n="D"+(e>9?e:"0"+e);const o=t.detail&&t.detail[0]?t.detail[0].match(f.colorbase)[0]:void 0,i=t.detail&&t.detail[1]?t.detail[1].match(f.colorbase)[0]:void 0;return o&&(n+="_"+o,i&&(n+=","+i),n+="_"),n})):[]).join("");let a="";const c=t.classes&&"string"==typeof t.classes?t.classes.match(f.classes)[0]:void 0;a+=c||"";const $=t.id&&"string"==typeof t.id?t.id.match(f.id)[0]:void 0;return a+=c||$?"!":"",a+=$?$+"!":"",e+(l||a?"-"+l:"")+(a?"-"+a:"")};let u={symbol:"S[123][0-9a-f]{2}[0-5][0-9a-f]",coord:"[0-9]{3}x[0-9]{3}",sort:"A",box:"[BLMR]"};u.prefix=`(?:${u.sort}(?:${u.symbol})+)`,u.spatial=`${u.symbol}${u.coord}`,u.signbox=`${u.box}${u.coord}(?:${u.spatial})*`,u.sign=`${u.prefix}?${u.signbox}`,u.sortable=`${u.prefix}${u.signbox}`;let v={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};v.colorbase=`(?:${v.colorhex}|${v.colorname})`,v.color=`_${v.colorbase}_`,v.colors=`_${v.colorbase}(?:,${v.colorbase})?_`,v.background=`G${v.color}`,v.detail=`D${v.colors}`,v.detailsym=`D[0-9]{2}${v.colors}`,v.classes=`${v.classbase}(?: ${v.classbase})*`,v.full=`-(${v.colorize})?(${v.padding})?(${v.background})?(${v.detail})?(${v.zoom})?(?:-((?:${v.detailsym})*))?(?:-(${v.classes})?!(?:(${v.id})!)?)?`;const x=t=>(new RegExp(`^${v.colorhex}$`).test(t)?"#":"")+t,h=t=>{const e=("string"==typeof t?t.match(new RegExp(`^${v.full}`)):[])||[];return n={colorize:e[1]?!!e[1]:void 0,padding:e[2]?parseInt(e[2].slice(1)):void 0,background:e[3]?x(e[3].slice(2,-1)):void 0,detail:e[4]?e[4].slice(2,-1).split(",").map(x):void 0,zoom:e[5]?"Zx"===e[5]?"x":parseFloat(e[5].slice(1)):void 0,detailsym:e[6]?e[6].match(new RegExp(v.detailsym,"g")).map((t=>{const e=t.split("_"),n=e[1].split(",").map(x);return{index:parseInt(e[0].slice(1)),detail:n}})):void 0,classes:e[7]?e[7]:void 0,id:e[8]?e[8]:void 0},Object.fromEntries(Object.entries(n).filter((([t,e])=>void 0!==e)));var n},y=t=>t.split("x").map((t=>parseInt(t))),m=t=>{const e="string"==typeof t?t.match(new RegExp(`^(${u.symbol})(${u.coord})?(${v.full})?`)):void 0;return{symbol:e?e[1]:void 0,coord:e&&e[2]?y(e[2]):void 0,style:e?e[3]:void 0}},w=t=>{const e="string"==typeof t?t.match(new RegExp(`^(${u.prefix})?(${u.signbox})(${v.full})?`)):void 0;return e?{sequence:e[1]?e[1].slice(1).match(/.{6}/g):void 0,box:e[2][0],max:y(e[2].slice(1,8)),spatials:e[2].length<9?void 0:e[2].slice(8).match(/(.{13})/g).map((t=>({symbol:t.slice(0,6),coord:[parseInt(t.slice(6,9)),parseInt(t.slice(10,13))]}))),style:e[3]}:{}},b=t=>{if("string"!=typeof t)return[];const e=t.match(new RegExp(`(${u.sign}(${v.full})?|${u.spatial}(${v.full})?)`,"g"));return e?[...e]:[]},I=t=>{let e,n,o,i,r,s,l,a,c=w(t);c.spatials?(i=Math.min(...c.spatials.map((t=>t.coord[0]))),r=c.max[0],e=r-i,s=Math.min(...c.spatials.map((t=>t.coord[1]))),l=c.max[1],n=l-s,o="sign",a=c.box):(c=m(t),a="M",c.coord?(i=c.coord[0],e=2*(500-i),s=c.coord[1],n=2*(500-s),o="symbol"):(i=490,e=20,s=490,n=20,o="none"));let $=h(c.style);return{minX:i,minY:s,width:e,height:n,segment:o,lane:{B:0,L:-1,M:0,R:1}[a],padding:$.padding||0,zoom:$.zoom||1}},z={height:500,width:150,offset:50,pad:20,margin:5,dynamic:!1,background:void 0,punctuation:{spacing:!0,pad:30,pull:!0},style:{detail:["black","white"],zoom:1}},_=(t,e)=>{if("string"!=typeof t)return{};const n=(t=>("object"!=typeof t&&(t={}),{...z,...t,punctuation:{...z.punctuation,...t.punctuation},style:{...z.style,...t.style}}))(e);let o=b(t),i=0,r=[],s=[],l=0,a=parseInt(n.width/2),c=n.height-n.margin,$=!0,f=!1;for(let t of o){let e=I(t);i+=l,i+=n.punctuation.spacing?"sign"==e.segment?n.pad:0:n.pad,f=i+e.height>c,f&&"symbol"==e.segment&&n.punctuation.pull&&$&&(f=!1,$=!1),0==s.length&&(f=!1),f&&(i=n.pad,r.push(s),s=[],$=!0),s.push(Object.assign(e,{x:a+n.offset*e.lane-(500-e.minX)*e.zoom*n.style.zoom,y:i,text:t})),i+=e.height*e.zoom*n.style.zoom,l=n.punctuation.spacing?"sign"==e.segment?n.pad:n.punctuation.pad:n.pad}if(s.length&&r.push(s),n.punctuation.pull)for(let t of r){let e=t[t.length-1],o=e.y+e.height-(n.height-n.margin);if(o>0){let e=parseInt(o/t.length)+1;for(let n in t)t[n].y-=e*n+e}}let g=[];for(let t of r){let e=[a-n.offset-n.pad],o=[a+n.offset+n.pad];for(let i of t)e.push(i.x-n.pad),o.push(i.x+i.width+n.pad);e=Math.min(...e),o=Math.max(...o);let i=n.width,r=0;n.dynamic?(i=o-e,r=-e):r=a-parseInt((e+o)/2);for(let e of t)e.x+=r;g.push(i)}return{options:n,widths:g,columns:r}},M=[256,517,759,767,877,895,903],A=[767,876],S=[767,885],Z=["#0000CC","#CC0000","#FF0099","#006600","#000000","#884411","#FF9900"],j=t=>{const e=m(t);let n="#000000";if(e.symbol){const t=parseInt(e.symbol.slice(1,4),16),o=M.findIndex((e=>e>t));n=Z[o<0?6:o-1]}return n},F=t=>{const e=m(t);if(!e.symbol)return"";let n,o,i,s,l=d(e.style);if(e.coord)n=e.coord[0],o=e.coord[1],i=500-n+500,s=500-o+500;else{let t=r(e.symbol);if(!t)return"";n=500-parseInt((t[0]+1)/2),o=500-parseInt((t[1]+1)/2),i=500-n+500,s=500-o+500}let a,c=$(e.symbol);c=`  <g transform="translate(${n},${o})">\n${c}\n  </g>`,l.colorize?a=j(e.symbol):l.detail&&(a=l.detail[0]),a&&(c=c.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${a}"`));let f=l.detail&&l.detail[1];f&&(c=c.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${f}"`));let g="";return l.padding&&(n-=l.padding,o-=l.padding,i+=l.padding,s+=l.padding),l.background&&(g=`\n  <rect x="${n}" y="${o}" width="${i-n}" height="${s-o}" style="fill:${l.background};" />`),`  <text font-size="0">${t}</text>${g}\n${c}`},R=t=>{let e=w(t);if(e.spatials){let n=d(e.style);n.detailsym&&n.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let o=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),r=e.max[0],s=e.max[1],l="";n.padding&&(o-=n.padding,i-=n.padding,r+=n.padding,s+=n.padding),n.background&&(l=`\n  <rect x="${o}" y="${i}" width="${r-o}" height="${s-i}" style="fill:${n.background};" />`);let a=`  <text font-size="0">${t}</text>${l}`;const c=n.detail&&n.detail[0],f=n.detail&&n.detail[1];return a+="\n"+e.spatials.map((t=>{let e=$(t.symbol),o=c;t.detail?o=t.detail[0]:n.colorize&&(o=j(t.symbol)),o&&(e=e.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${o}"`));let i=f;return t.detail&&t.detail[1]&&(i=t.detail[1]),i&&(e=e.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${i}"`)),`  <g transform="translate(${t.coord[0]},${t.coord[1]})">\n${e}\n  </g>`})).join("\n"),a}return""},k=(t,e)=>{"object"!=typeof e&&(e={});const n=Object.assign(z,e);let o=n.width,i=n.height,r="";n.background&&(r=`\n  <rect x="0" y="0" width="${o-0}" height="${i-0}" style="fill:${n.background};" />`);let s=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="${n.width}" height="${n.height}" viewBox="0 0 ${o-0} ${i-0}">\n  ${r}`;return s+=t.map((t=>{const e=t.text.indexOf("-");if(e>0){const o=t.text.substring(e),i={...n.style,...d(o)};t.text=t.text.replace(o,p(i))}else t.text+=p(n.style);return t.zoom=t.zoom*n.style.zoom,'<g transform="translate('+t.x+","+t.y+") scale("+t.zoom+") translate("+-t.minX+","+-t.minY+') ">'+("sign"==t.segment?R(t.text):F(t.text))+"</g>"})).join("\n"),s+="\n</svg>",s},E=(t,e)=>{const n=function(t,e){"object"!=typeof e&&(e={});const n=Object.assign(z,e),o=document.createElement("canvas");o.width=n.width,o.height=n.height;const i=o.getContext("2d");return n.background&&(i.rect(0,0,n.width,n.height),i.fillStyle=n.background,i.fill()),t.map((t=>{const e=t.text.indexOf("-");if(e>0){const o=t.text.substring(e),i={...n.style,...d(o)};t.text=t.text.replace(o,p(i))}else t.text+=p(n.style);t.zoom=t.zoom*n.style.zoom;let o={};if("sign"==t.segment)o=w(t.text);else{let e=m(t.text);o.style=e.style,o.spatials=[e]}let r=d(o.style);r.background&&(i.fillStyle=r.background,i.fillRect(t.x-r.padding*t.zoom,t.y-r.padding*t.zoom,(t.width+2*r.padding)*t.zoom,(t.height+2*r.padding)*t.zoom)),r.detailsym&&r.detailsym.forEach((t=>{o.spatials[t.index-1]&&(o.spatials[t.index-1].detail=t.detail)}));const s=r.detail&&r.detail[0]||"black",l=r.detail&&r.detail[1]||"white";o.spatials.forEach((e=>{let n=s;e.detail?n=e.detail[0]:r.colorize&&(n=j(e.symbol));let o=l;e.detail&&e.detail[1]&&(o=e.detail[1]),i.font=30*t.zoom+"px 'SuttonSignWritingFill'",i.fillStyle=o,i.fillText(c(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom),i.font=30*t.zoom+"px 'SuttonSignWritingLine'",i.fillStyle=n,i.fillText(a(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom)}))})),o}(t,e),o=n.toDataURL("image/png");return n.remove(),o};t.columnPng=E,t.columnSvg=k,t.columnsPng=function(t,e){"object"!=typeof e&&(e={});let n=_(t,e);return n.columns.map(((t,e)=>E(t,{...n.options,width:n.widths[e]})))},t.columnsSvg=function(t,e){"object"!=typeof e&&(e={});let n=_(t,e);return n.columns.map(((t,e)=>k(t,{...n.options,width:n.widths[e]})))},t.signNormalize=t=>{const e=w(t);if(e.spatials){const t=e.spatials.reduce(((t,e)=>{const n=r(e.symbol);return t[e.symbol]={width:n[0],height:n[1]},t}),{}),n=e=>({x1:Math.min(...e.map((t=>t.coord[0]))),y1:Math.min(...e.map((t=>t.coord[1]))),x2:Math.max(...e.map((e=>e.coord[0]+parseInt(t[e.symbol].width)))),y2:Math.max(...e.map((e=>e.coord[1]+parseInt(t[e.symbol].height))))}),o=A,i=e.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return o[0]<=e&&o[1]>=e})),s=S,l=e.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return s[0]<=e&&s[1]>=e}));let a=n(e.spatials),c=[a.x2,a.y2];if(i.length){const t=n(i);a.x1=t.x1,a.x2=t.x2}if(l.length){const t=n(l);a.y1=t.y1,a.y2=t.y2}const $=[parseInt((a.x2+a.x1)/2)-500,parseInt((a.y2+a.y1)/2)-500];return(e.sequence?"A"+e.sequence.join(""):"")+e.box+(c[0]-$[0])+"x"+(c[1]-$[1])+e.spatials.map((t=>t.symbol+(t.coord[0]-$[0])+"x"+(t.coord[1]-$[1]))).join("")+(e.style||"")}},t.signPng=t=>{const e=function(t){const e=w(t);if(e.spatials){const t=document.createElement("canvas"),n=t.getContext("2d");let o=d(e.style);o.detailsym&&o.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let i=Math.min(...e.spatials.map((t=>t.coord[0]))),r=Math.min(...e.spatials.map((t=>t.coord[1]))),s=e.max[0],l=e.max[1];o.padding&&(i-=o.padding,r-=o.padding,s+=o.padding,l+=o.padding);let $=1;"x"!=o.zoom&&($=o.zoom);let f=(s-i)*$,g=(l-r)*$;t.width=f||1,t.height=g||1,o.background&&(n.rect(0,0,f,g),n.fillStyle=o.background,n.fill());const p=o.detail&&o.detail[0]||"black",u=o.detail&&o.detail[1]||"white";return e.spatials.forEach((t=>{let e=p;t.detail?e=t.detail[0]:o.colorize&&(e=j(t.symbol));let s=u;t.detail&&t.detail[1]&&(s=t.detail[1]),n.font=30*$+"px 'SuttonSignWritingFill'",n.fillStyle=s,n.fillText(c(t.symbol),(t.coord[0]-i)*$,(t.coord[1]-r)*$),n.font=30*$+"px 'SuttonSignWritingLine'",n.fillStyle=e,n.fillText(a(t.symbol),(t.coord[0]-i)*$,(t.coord[1]-r)*$)})),t}}(t),n=e.toDataURL("image/png");return e.remove(),n},t.signSvg=t=>{let e=w(t);if(e.spatials){let n=d(e.style),o=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),r=e.max[0],s=e.max[1],l="";n.classes&&(l=` class="${n.classes}"`);let a="";n.id&&(a=` id="${n.id}"`),n.padding&&(o-=n.padding,i-=n.padding,r+=n.padding,s+=n.padding);let c="";"x"!=n.zoom&&(c=` width="${(r-o)*(n.zoom?n.zoom:1)}" height="${(s-i)*(n.zoom?n.zoom:1)}"`);let $=`<svg${l}${a} version="1.1" xmlns="http://www.w3.org/2000/svg"${c} viewBox="${o} ${i} ${r-o} ${s-i}">\n`;return $+=R(t),$+="\n</svg>",$}return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>'},t.signSvgBody=R,t.symbolFill=c,t.symbolLine=a,t.symbolNormalize=t=>{const e=m(t);if(!e.symbol)return null;{let t=r(e.symbol);if(t)return`${e.symbol}${500-parseInt((t[0]+1)/2)}x${500-parseInt((t[1]+1)/2)}${e.style||""}`}},t.symbolPng=t=>{const e=function(t){const e=m(t);if(e.symbol){let t=r(e.symbol);if(t){const n=document.createElement("canvas"),o=n.getContext("2d");let i=d(e.style),r="black";i.colorize?r=j(e.symbol):i.detail&&(r=i.detail[0]);let s=i.detail&&i.detail[1]||"white",l=500,$=l+t[0],f=500,g=f+t[1];i.padding&&(l-=i.padding,f-=i.padding,$+=i.padding,g+=i.padding);let p=1;"x"!=i.zoom&&(p=i.zoom);let u=($-l)*p,v=(g-f)*p;return n.width=u||1,n.height=v||1,i.background&&(o.rect(0,0,u,v),o.fillStyle=i.background,o.fill()),o.font=30*p+"px 'SuttonSignWritingFill'",o.fillStyle=s,o.fillText(c(e.symbol),(500-l)*p,(500-f)*p),o.font=30*p+"px 'SuttonSignWritingLine'",o.fillStyle=r,o.fillText(a(e.symbol),(500-l)*p,(500-f)*p),n}}}(t),n=e.toDataURL("image/png");return e.remove(),n},t.symbolSize=r,t.symbolSvg=t=>{const e=m(t),n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>';if(!e.symbol)return n;let o,i,s,l,a=d(e.style);if(e.coord)o=e.coord[0],i=e.coord[1],s=500-o+500,l=500-i+500;else{let t=r(e.symbol);if(!t)return n;o=parseInt(500-t[0]/2),i=parseInt(500-t[1]/2),s=o+t[0],l=i+t[1]}let c="";a.classes&&(c=` class="${a.classes}"`);let $="";a.id&&($=` id="${a.id}"`),a.padding&&(o-=a.padding,i-=a.padding,s+=a.padding,l+=a.padding);let f="";return"x"!=a.zoom&&(f=` width="${(s-o)*(a.zoom?a.zoom:1)}" height="${(l-i)*(a.zoom?a.zoom:1)}"`),`<svg${c}${$} version="1.1" xmlns="http://www.w3.org/2000/svg"${f} viewBox="${o} ${i} ${s-o} ${l-i}">\n${F(t)}\n</svg>`},t.symbolSvgBody=F,t.symbolText=$,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));export{o as a,n as f}