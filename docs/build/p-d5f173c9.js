/*!
 * The Sutton SignWriting Web Components
 */
import{c as t,a as e}from"./p-b65461bb.js";var n=t((function(t,e){!function(t){let e={symbol:"(?:(?:\ud8c0[\udc01-\udfff])|(?:[\ud8c1-\ud8fc][\udc00-\udfff])|(?:\ud8fd[\udc00-\udc80]))",coord:"(?:\ud836[\udc0c-\uddff]){2}",sort:"ð €",box:"\ud836[\udc01-\udc04]"};e.prefix=`(?:${e.sort}(?:${e.symbol})+)`,e.spatial=`${e.symbol}${e.coord}`,e.signbox=`${e.box}${e.coord}(?:${e.spatial})*`,e.sign=`${e.prefix}?${e.signbox}`,e.sortable=`${e.prefix}${e.signbox}`;let n={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};n.colorbase=`(?:${n.colorhex}|${n.colorname})`,n.color=`_${n.colorbase}_`,n.colors=`_${n.colorbase}(?:,${n.colorbase})?_`,n.background=`G${n.color}`,n.detail=`D${n.colors}`,n.detailsym=`D[0-9]{2}${n.colors}`,n.classes=`${n.classbase}(?: ${n.classbase})*`,n.full=`-(${n.colorize})?(${n.padding})?(${n.background})?(${n.detail})?(${n.zoom})?(?:-((?:${n.detailsym})*))?(?:-(${n.classes})?!(?:(${n.id})!)?)?`;const o=t=>(new RegExp(`^${n.colorhex}$`).test(t)?"#":"")+t,i=t=>{const e=("string"==typeof t?t.match(new RegExp(`^${n.full}`)):[])||[];return i={colorize:e[1]?!!e[1]:void 0,padding:e[2]?parseInt(e[2].slice(1)):void 0,background:e[3]?o(e[3].slice(2,-1)):void 0,detail:e[4]?e[4].slice(2,-1).split(",").map(o):void 0,zoom:e[5]?"Zx"===e[5]?"x":parseFloat(e[5].slice(1)):void 0,detailsym:e[6]?e[6].match(new RegExp(n.detailsym,"g")).map((t=>{const e=t.split("_"),n=e[1].split(",").map(o);return{index:parseInt(e[0].slice(1)),detail:n}})):void 0,classes:e[7]?e[7]:void 0,id:e[8]?e[8]:void 0},Object.fromEntries(Object.entries(i).filter((([t,e])=>void 0!==e)));var i},r=t=>parseInt(t.codePointAt(0))-120844+250,s=t=>[r(t.slice(0,2)),r(t.slice(2,4))],l=t=>t.map((t=>(t=>String.fromCodePoint(120844+parseInt(t)-250))(t))).join(""),c=t=>parseInt(t.codePointAt(0)),a={symbol:t=>{const o="string"==typeof t?t.match(new RegExp(`^(${e.symbol})(${e.coord})?(${n.full})?`)):void 0;return{symbol:o?o[1]:void 0,coord:o&&o[2]?s(o[2]):void 0,style:o?o[3]:void 0}},sign:t=>{const o="string"==typeof t?t.match(new RegExp(`^(${e.prefix})?(${e.signbox})(${n.full})?`)):void 0;return o?{sequence:o[1]?o[1].slice(2).match(/.{2}/g):void 0,box:o[2].slice(0,2),max:s(o[2].slice(2,6)),spatials:o[2].length<7?void 0:o[2].slice(6).match(/(.{6})/g).map((t=>({symbol:t.slice(0,2),coord:s(t.slice(2))}))),style:o[3]}:{}},text:t=>{if("string"!=typeof t)return[];const o=t.match(new RegExp(`(${e.sign}(${n.full})?|${e.spatial}(${n.full})?)`,"g"));return o?[...o]:[]}},f={symbol:t=>{if("object"==typeof t&&null!==t&&"string"==typeof t.symbol){const o=(t.symbol.match(e.symbol)||[""])[0];if(o){const e=t.coord&&t.coord[0]||"",i=t.coord&&t.coord[1]||"";return o+(e&&i?l([e,i]):"")+("string"==typeof t.style&&(t.style.match(n.full)||[""])[0]||"")}}},sign:t=>{if("object"!=typeof t||null===t)return;let o="string"!=typeof t.box?"ð ƒ":(t.box+"ð ƒ").match(e.box);const i=t.max&&t.max[0]||"",r=t.max&&t.max[1]||"",s=i&&r?l([i,r]):void 0;if(!s)return;let c="";t.sequence&&Array.isArray(t.sequence)&&(c=t.sequence.map((t=>(t.match(e.symbol)||[""])[0])).join(""),c=c?"ð €"+c:"");let a="";return t.spatials&&Array.isArray(t.spatials)&&(a=t.spatials.map((t=>{if("string"==typeof t.symbol){const n=(t.symbol.match(e.symbol)||[""])[0];if(n){const e=t.coord&&t.coord[0]||"",o=t.coord&&t.coord[1]||"",i=e&&o?l([e,o]):"";if(i)return n+i}}return""})).join("")),c+o+s+a+("string"==typeof t.style&&(t.style.match(n.full)||[""])[0]||"")}},d=t=>{let e,n,o,r,s,l,c,f,d=a.sign(t);d.spatials?(r=Math.min(...d.spatials.map((t=>t.coord[0]))),s=d.max[0],e=s-r,l=Math.min(...d.spatials.map((t=>t.coord[1]))),c=d.max[1],n=c-l,o="sign",f=d.box):(d=a.symbol(t),f="ð ƒ",d.coord?(r=d.coord[0],e=2*(500-r),l=d.coord[1],n=2*(500-l),o="symbol"):(r=490,e=20,l=490,n=20,o="none"));let u=i(d.style);return{minX:r,minY:l,width:e,height:n,segment:o,lane:{"ð ":0,"ð ‚":-1,"ð ƒ":0,"ð „":1}[f],padding:u.padding||0,zoom:u.zoom||1}},u={height:500,width:150,offset:50,pad:20,margin:5,dynamic:!1,background:void 0,punctuation:{spacing:!0,pad:30,pull:!0},style:{detail:["black","white"],zoom:1}},$=t=>("object"!=typeof t&&(t={}),{...u,...t,punctuation:{...u.punctuation,...t.punctuation},style:{...u.style,...t.style}}),g=[262145,287201,310433,311201,321761,323489,324257],p={all:[262145,324736],writing:[262145,323488],hand:[262145,287200],movement:[287201,310432],dynamic:[310433,311200],head:[311201,321760],hcenter:[311201,321760],vcenter:[311201,322624],trunk:[321761,322624],limb:[322625,323488],location:[323489,324256],punctuation:[324257,324736]},v=["#0000CC","#CC0000","#FF0099","#006600","#000000","#884411","#FF9900"];t.category=g,t.colorize=t=>{const e=a.symbol(t);let n="#000000";if(e.symbol){const t=c(e.symbol),o=g.findIndex((e=>e>t));n=v[o<0?6:o-1]}return n},t.colors=v,t.columnDefaults=u,t.columnDefaultsMerge=$,t.columns=(t,e)=>{if("string"!=typeof t)return{};const n=$(e);let o=a.text(t),i=0,r=[],s=[],l=0,c=parseInt(n.width/2),f=n.height-n.margin,u=!0,g=!1;for(let t of o){let e=d(t);i+=l,i+=n.punctuation.spacing?"sign"==e.segment?n.pad:0:n.pad,g=i+e.height>f,g&&"symbol"==e.segment&&n.punctuation.pull&&u&&(g=!1,u=!1),0==s.length&&(g=!1),g&&(i=n.pad,r.push(s),s=[],u=!0),s.push(Object.assign(e,{x:c+n.offset*e.lane-(500-e.minX)*e.zoom*n.style.zoom,y:i,text:t})),i+=e.height*e.zoom*n.style.zoom,l=n.punctuation.spacing?"sign"==e.segment?n.pad:n.punctuation.pad:n.pad}if(s.length&&r.push(s),n.punctuation.pull)for(let t of r){let e=t[t.length-1],o=e.y+e.height-(n.height-n.margin);if(o>0){let e=parseInt(o/t.length)+1;for(let n in t)t[n].y-=e*n+e}}let p=[];for(let t of r){let e=[c-n.offset-n.pad],o=[c+n.offset+n.pad];for(let i of t)e.push(i.x-n.pad),o.push(i.x+i.width+n.pad);e=Math.min(...e),o=Math.max(...o);let i=n.width,r=0;n.dynamic?(i=o-e,r=-e):r=c-parseInt((e+o)/2);for(let e of t)e.x+=r;p.push(i)}return{options:n,widths:p,columns:r}},t.compose=f,t.decode=t=>t.replace(/\\u([0-9A-F]{4})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})),t.encode=t=>t.replace(/[\u007F-\uFFFF]/g,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).substr(-4).toUpperCase()})),t.group=[262145,263489,265025,268673,269441,275009,277889,280001,281825,285665,287201,288833,290753,294881,296417,299777,302657,304289,307169,308513,310433,311201,312257,315329,316961,319841,321761,322625,323489,324257],t.info=d,t.isType=(t,e)=>{const n=a.symbol(t);if(n.symbol){const t=c(n.symbol),o=p[e];if(o)return o[0]<=t&&o[1]>=t}return!1},t.kind=[262145,323489,324257],t.pair=t=>[t.charCodeAt(0).toString(16).toUpperCase(),t.charCodeAt(1).toString(16).toUpperCase()],t.parse=a,t.ranges=p,t.re=e,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),o=t((function(t,e){!function(t){const e=t=>t.map((t=>(t=>String.fromCodePoint(120844+parseInt(t)-250))(t))).join(""),n=t=>(t=>parseInt(t.codePointAt(0)))(t)-262144;let o={};const i=152;let r;const s=function(t){return function(t){if(t in o)return[...o[t]];if(!r){const t=document.createElement("canvas");t.width=i,t.height=i,r=t.getContext("2d")}r.clearRect(0,0,i,i),r.font="60px 'SuttonSignWritingLine'",r.fillText(String.fromCodePoint(t+983040),0,0);const e=r.getImageData(0,0,i,i).data;let n,s,l,c;t:for(n=151;n>=0;n--)for(s=0;s<i;s+=1)for(c=0;c<4;c+=1)if(l=4*n+4*s*i+c,e[l])break t;var a=n;t:for(s=151;s>=0;s--)for(n=0;n<a;n+=1)for(c=0;c<4;c+=1)if(l=4*n+4*s*i+c,e[l])break t;var f=s+1;if(a=Math.ceil(a/2),f=Math.ceil(f/2),14394==t&&(a=19),[10468,10480,10496,10512,10500,10532,10548,10862,10878,10894,11058,11074,11476,11488,11492,11504,11508,11520,10516,10910,10926,11042,11082,10942].includes(t)&&(a=20),31921==t&&(a=22),38460==t&&(a=23),[20164,20212].includes(t)&&(a=25),31894==t&&(a=28),46698==t&&(a=29),29606==t&&(a=30),44855==t&&(a=40),32667==t&&(a=50),[11088,11474,11490,11506].includes(t)&&(f=20),6285==t&&(f=21),40804==t&&(f=31),41475==t&&(f=36),0==a&&0==f){const e={9:[15,30],10:[21,30],11:[30,15],12:[30,21],13:[15,30],14:[21,30]};t in e&&(a=e[t][0],f=e[t][1])}return 0!=a||0!=f?(o[t]=[a,f],[a,f]):void 0}(n(t))},l=function(t){return String.fromCodePoint(t+983040)},c=function(t){return String.fromCodePoint(t+1048576)},a=function(t){return l(n(t))},f=function(t){return c(n(t))},d=function(t){return e=n(t),`    <text class="sym-fill" fill="white" style="pointer-events:none;font-family:'SuttonSignWritingFill';font-size:30px;">${c(e)}</text>\n    <text class="sym-line" fill="black" style="pointer-events:none;font-family:'SuttonSignWritingLine';font-size:30px;">${l(e)}</text>`;var e};let u={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};u.colorbase=`(?:${u.colorhex}|${u.colorname})`,u.color=`_${u.colorbase}_`,u.colors=`_${u.colorbase}(?:,${u.colorbase})?_`,u.background=`G${u.color}`,u.detail=`D${u.colors}`,u.detailsym=`D[0-9]{2}${u.colors}`,u.classes=`${u.classbase}(?: ${u.classbase})*`,u.full=`-(${u.colorize})?(${u.padding})?(${u.background})?(${u.detail})?(${u.zoom})?(?:-((?:${u.detailsym})*))?(?:-(${u.classes})?!(?:(${u.id})!)?)?`;const $=t=>(new RegExp(`^${u.colorhex}$`).test(t)?"#":"")+t,g=t=>{const e=("string"==typeof t?t.match(new RegExp(`^${u.full}`)):[])||[];return n={colorize:e[1]?!!e[1]:void 0,padding:e[2]?parseInt(e[2].slice(1)):void 0,background:e[3]?$(e[3].slice(2,-1)):void 0,detail:e[4]?e[4].slice(2,-1).split(",").map($):void 0,zoom:e[5]?"Zx"===e[5]?"x":parseFloat(e[5].slice(1)):void 0,detailsym:e[6]?e[6].match(new RegExp(u.detailsym,"g")).map((t=>{const e=t.split("_"),n=e[1].split(",").map($);return{index:parseInt(e[0].slice(1)),detail:n}})):void 0,classes:e[7]?e[7]:void 0,id:e[8]?e[8]:void 0},Object.fromEntries(Object.entries(n).filter((([t,e])=>void 0!==e)));var n},p=t=>{if("object"!=typeof t||null===t)return;let e="-";e+=t.colorize?"C":"";const n=parseInt(t.padding);e+=!n||n<=0||n>99?"":"P"+(n>9?n:"0"+n);const o=t.background&&"string"==typeof t.background?t.background.match(u.colorbase)[0]:void 0;e+=o?"G_"+o+"_":"";const i=t.detail&&t.detail[0]&&"string"==typeof t.detail[0]?t.detail[0].match(u.colorbase)[0]:void 0,r=t.detail&&t.detail[1]&&"string"==typeof t.detail[1]?t.detail[1].match(u.colorbase)[0]:void 0;i&&(e+="D_"+i,r&&(e+=","+r),e+="_");const s="x"===t.zoom?"x":parseFloat(t.zoom);e+=!s||s<=0?"":"Z"+s;let l="";l+=(t.detailsym&&Array.isArray(t.detailsym)?t.detailsym.map((t=>{const e=parseInt(t.index);if(!e||e<=0||e>99)return"";let n="D"+(e>9?e:"0"+e);const o=t.detail&&t.detail[0]?t.detail[0].match(u.colorbase)[0]:void 0,i=t.detail&&t.detail[1]?t.detail[1].match(u.colorbase)[0]:void 0;return o&&(n+="_"+o,i&&(n+=","+i),n+="_"),n})):[]).join("");let c="";const a=t.classes&&"string"==typeof t.classes?t.classes.match(u.classes)[0]:void 0;c+=a||"";const f=t.id&&"string"==typeof t.id?t.id.match(u.id)[0]:void 0;return c+=a||f?"!":"",c+=f?f+"!":"",e+(l||c?"-"+l:"")+(c?"-"+c:"")};let v={symbol:"(?:(?:\ud8c0[\udc01-\udfff])|(?:[\ud8c1-\ud8fc][\udc00-\udfff])|(?:\ud8fd[\udc00-\udc80]))",coord:"(?:\ud836[\udc0c-\uddff]){2}",sort:"ð €",box:"\ud836[\udc01-\udc04]"};v.prefix=`(?:${v.sort}(?:${v.symbol})+)`,v.spatial=`${v.symbol}${v.coord}`,v.signbox=`${v.box}${v.coord}(?:${v.spatial})*`,v.sign=`${v.prefix}?${v.signbox}`,v.sortable=`${v.prefix}${v.signbox}`;let y={colorize:"C",colorhex:"(?:[0-9a-fA-F]{3}){1,2}",colorname:"[a-zA-Z]+",padding:"P[0-9]{2}",zoom:"Z(?:[0-9]+(?:\\.[0-9]+)?|x)",classbase:"-?[_a-zA-Z][_a-zA-Z0-9-]{0,100}",id:"[a-zA-Z][_a-zA-Z0-9-]{0,100}"};y.colorbase=`(?:${y.colorhex}|${y.colorname})`,y.color=`_${y.colorbase}_`,y.colors=`_${y.colorbase}(?:,${y.colorbase})?_`,y.background=`G${y.color}`,y.detail=`D${y.colors}`,y.detailsym=`D[0-9]{2}${y.colors}`,y.classes=`${y.classbase}(?: ${y.classbase})*`,y.full=`-(${y.colorize})?(${y.padding})?(${y.background})?(${y.detail})?(${y.zoom})?(?:-((?:${y.detailsym})*))?(?:-(${y.classes})?!(?:(${y.id})!)?)?`;const h=t=>(new RegExp(`^${y.colorhex}$`).test(t)?"#":"")+t,x=t=>{const e=("string"==typeof t?t.match(new RegExp(`^${y.full}`)):[])||[];return n={colorize:e[1]?!!e[1]:void 0,padding:e[2]?parseInt(e[2].slice(1)):void 0,background:e[3]?h(e[3].slice(2,-1)):void 0,detail:e[4]?e[4].slice(2,-1).split(",").map(h):void 0,zoom:e[5]?"Zx"===e[5]?"x":parseFloat(e[5].slice(1)):void 0,detailsym:e[6]?e[6].match(new RegExp(y.detailsym,"g")).map((t=>{const e=t.split("_"),n=e[1].split(",").map(h);return{index:parseInt(e[0].slice(1)),detail:n}})):void 0,classes:e[7]?e[7]:void 0,id:e[8]?e[8]:void 0},Object.fromEntries(Object.entries(n).filter((([t,e])=>void 0!==e)));var n},m=t=>parseInt(t.codePointAt(0))-120844+250,w=t=>[m(t.slice(0,2)),m(t.slice(2,4))],b=t=>{const e="string"==typeof t?t.match(new RegExp(`^(${v.symbol})(${v.coord})?(${y.full})?`)):void 0;return{symbol:e?e[1]:void 0,coord:e&&e[2]?w(e[2]):void 0,style:e?e[3]:void 0}},z=t=>{const e="string"==typeof t?t.match(new RegExp(`^(${v.prefix})?(${v.signbox})(${y.full})?`)):void 0;return e?{sequence:e[1]?e[1].slice(2).match(/.{2}/g):void 0,box:e[2].slice(0,2),max:w(e[2].slice(2,6)),spatials:e[2].length<7?void 0:e[2].slice(6).match(/(.{6})/g).map((t=>({symbol:t.slice(0,2),coord:w(t.slice(2))}))),style:e[3]}:{}},I=t=>{if("string"!=typeof t)return[];const e=t.match(new RegExp(`(${v.sign}(${y.full})?|${v.spatial}(${y.full})?)`,"g"));return e?[...e]:[]},_=t=>{let e,n,o,i,r,s,l,c,a=z(t);a.spatials?(i=Math.min(...a.spatials.map((t=>t.coord[0]))),r=a.max[0],e=r-i,s=Math.min(...a.spatials.map((t=>t.coord[1]))),l=a.max[1],n=l-s,o="sign",c=a.box):(a=b(t),c="ð ƒ",a.coord?(i=a.coord[0],e=2*(500-i),s=a.coord[1],n=2*(500-s),o="symbol"):(i=490,e=20,s=490,n=20,o="none"));let f=x(a.style);return{minX:i,minY:s,width:e,height:n,segment:o,lane:{"ð ":0,"ð ‚":-1,"ð ƒ":0,"ð „":1}[c],padding:f.padding||0,zoom:f.zoom||1}},F={height:500,width:150,offset:50,pad:20,margin:5,dynamic:!1,background:void 0,punctuation:{spacing:!0,pad:30,pull:!0},style:{detail:["black","white"],zoom:1}},S=(t,e)=>{if("string"!=typeof t)return{};const n=(t=>("object"!=typeof t&&(t={}),{...F,...t,punctuation:{...F.punctuation,...t.punctuation},style:{...F.style,...t.style}}))(e);let o=I(t),i=0,r=[],s=[],l=0,c=parseInt(n.width/2),a=n.height-n.margin,f=!0,d=!1;for(let t of o){let e=_(t);i+=l,i+=n.punctuation.spacing?"sign"==e.segment?n.pad:0:n.pad,d=i+e.height>a,d&&"symbol"==e.segment&&n.punctuation.pull&&f&&(d=!1,f=!1),0==s.length&&(d=!1),d&&(i=n.pad,r.push(s),s=[],f=!0),s.push(Object.assign(e,{x:c+n.offset*e.lane-(500-e.minX)*e.zoom*n.style.zoom,y:i,text:t})),i+=e.height*e.zoom*n.style.zoom,l=n.punctuation.spacing?"sign"==e.segment?n.pad:n.punctuation.pad:n.pad}if(s.length&&r.push(s),n.punctuation.pull)for(let t of r){let e=t[t.length-1],o=e.y+e.height-(n.height-n.margin);if(o>0){let e=parseInt(o/t.length)+1;for(let n in t)t[n].y-=e*n+e}}let u=[];for(let t of r){let e=[c-n.offset-n.pad],o=[c+n.offset+n.pad];for(let i of t)e.push(i.x-n.pad),o.push(i.x+i.width+n.pad);e=Math.min(...e),o=Math.max(...o);let i=n.width,r=0;n.dynamic?(i=o-e,r=-e):r=c-parseInt((e+o)/2);for(let e of t)e.x+=r;u.push(i)}return{options:n,widths:u,columns:r}},j=[262145,287201,310433,311201,321761,323489,324257],A=[311201,321760],M=[311201,322624],Z=["#0000CC","#CC0000","#FF0099","#006600","#000000","#884411","#FF9900"],k=t=>{const e=b(t);let n="#000000";if(e.symbol){const t=(t=>parseInt(t.codePointAt(0)))(e.symbol),o=j.findIndex((e=>e>t));n=Z[o<0?6:o-1]}return n},E=t=>{const e=b(t);if(!e.symbol)return"";let n,o,i,r,l=g(e.style);if(e.coord)n=e.coord[0],o=e.coord[1],i=500-n+500,r=500-o+500;else{let t=s(e.symbol);if(!t)return"";n=500-parseInt((t[0]+1)/2),o=500-parseInt((t[1]+1)/2),i=500-n+500,r=500-o+500}let c,a=d(e.symbol);a=`  <g transform="translate(${n},${o})">\n${a}\n  </g>`,l.colorize?c=k(e.symbol):l.detail&&(c=l.detail[0]),c&&(a=a.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${c}"`));let f=l.detail&&l.detail[1];f&&(a=a.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${f}"`));let u="";return l.padding&&(n-=l.padding,o-=l.padding,i+=l.padding,r+=l.padding),l.background&&(u=`\n  <rect x="${n}" y="${o}" width="${i-n}" height="${r-o}" style="fill:${l.background};" />`),`  <text font-size="0">${t}</text>${u}\n${a}`},R=t=>{let e=z(t);if(e.spatials){let n=g(e.style);n.detailsym&&n.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let o=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),r=e.max[0],s=e.max[1],l="";n.padding&&(o-=n.padding,i-=n.padding,r+=n.padding,s+=n.padding),n.background&&(l=`\n  <rect x="${o}" y="${i}" width="${r-o}" height="${s-i}" style="fill:${n.background};" />`);let c=`  <text font-size="0">${t}</text>${l}`;const a=n.detail&&n.detail[0],f=n.detail&&n.detail[1];return c+="\n"+e.spatials.map((t=>{let e=d(t.symbol),o=a;t.detail?o=t.detail[0]:n.colorize&&(o=k(t.symbol)),o&&(e=e.replace(/class="sym-line" fill="black"/,`class="sym-line" fill="${o}"`));let i=f;return t.detail&&t.detail[1]&&(i=t.detail[1]),i&&(e=e.replace(/class="sym-fill" fill="white"/,`class="sym-fill" fill="${i}"`)),`  <g transform="translate(${t.coord[0]},${t.coord[1]})">\n${e}\n  </g>`})).join("\n"),c}return""},C=(t,e)=>{"object"!=typeof e&&(e={});const n=Object.assign(F,e);let o=n.width,i=n.height,r="";n.background&&(r=`\n  <rect x="0" y="0" width="${o-0}" height="${i-0}" style="fill:${n.background};" />`);let s=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="${n.width}" height="${n.height}" viewBox="0 0 ${o-0} ${i-0}">\n  <text font-size="0">0</text>${r}`;return s+=t.map((t=>{const e=t.text.indexOf("-");if(e>0){const o=t.text.substring(e),i={...n.style,...g(o)};t.text=t.text.replace(o,p(i))}else t.text+=p(n.style);return t.zoom=t.zoom*n.style.zoom,'<g transform="translate('+t.x+","+t.y+") scale("+t.zoom+") translate("+-t.minX+","+-t.minY+') ">'+("sign"==t.segment?R(t.text):E(t.text))+"</g>"})).join("\n"),s+="\n</svg>",s},O=(t,e)=>{const n=function(t,e){"object"!=typeof e&&(e={});const n=Object.assign(F,e),o=document.createElement("canvas");o.width=n.width,o.height=n.height;const i=o.getContext("2d");return n.background&&(i.rect(0,0,n.width,n.height),i.fillStyle=n.background,i.fill()),t.map((t=>{const e=t.text.indexOf("-");if(e>0){const o=t.text.substring(e),i={...n.style,...g(o)};t.text=t.text.replace(o,p(i))}else t.text+=p(n.style);t.zoom=t.zoom*n.style.zoom;let o={};if("sign"==t.segment)o=z(t.text);else{let e=b(t.text);o.style=e.style,o.spatials=[e]}let r=g(o.style);r.background&&(i.fillStyle=r.background,i.fillRect(t.x-r.padding*t.zoom,t.y-r.padding*t.zoom,(t.width+2*r.padding)*t.zoom,(t.height+2*r.padding)*t.zoom)),r.detailsym&&r.detailsym.forEach((t=>{o.spatials[t.index-1]&&(o.spatials[t.index-1].detail=t.detail)}));const s=r.detail&&r.detail[0]||"black",l=r.detail&&r.detail[1]||"white";o.spatials.forEach((e=>{let n=s;e.detail?n=e.detail[0]:r.colorize&&(n=k(e.symbol));let o=l;e.detail&&e.detail[1]&&(o=e.detail[1]),i.font=30*t.zoom+"px 'SuttonSignWritingFill'",i.fillStyle=o,i.fillText(f(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom),i.font=30*t.zoom+"px 'SuttonSignWritingLine'",i.fillStyle=n,i.fillText(a(e.symbol),t.x+(e.coord[0]-t.minX)*t.zoom,t.y+(e.coord[1]-t.minY)*t.zoom)}))})),o}(t,e),o=n.toDataURL("image/png");return n.remove(),o};t.columnPng=O,t.columnSvg=C,t.columnsPng=function(t,e){"object"!=typeof e&&(e={});let n=S(t,e);return n.columns.map(((t,e)=>O(t,{...n.options,width:n.widths[e]})))},t.columnsSvg=function(t,e){"object"!=typeof e&&(e={});let n=S(t,e);return n.columns.map(((t,e)=>C(t,{...n.options,width:n.widths[e]})))},t.signNormalize=t=>{const n=z(t);if(n.spatials){const t=n.spatials.reduce(((t,e)=>{const n=s(e.symbol);return t[e.symbol]={width:n[0],height:n[1]},t}),{}),o=e=>({x1:Math.min(...e.map((t=>t.coord[0]))),y1:Math.min(...e.map((t=>t.coord[1]))),x2:Math.max(...e.map((e=>e.coord[0]+parseInt(t[e.symbol].width)))),y2:Math.max(...e.map((e=>e.coord[1]+parseInt(t[e.symbol].height))))}),i=A,r=n.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return i[0]<=e&&i[1]>=e})),l=M,c=n.spatials.filter((t=>{const e=parseInt(t.symbol.slice(1,4),16);return l[0]<=e&&l[1]>=e}));let a=o(n.spatials),f=[a.x2,a.y2];if(r.length){const t=o(r);a.x1=t.x1,a.x2=t.x2}if(c.length){const t=o(c);a.y1=t.y1,a.y2=t.y2}const d=[parseInt((a.x2+a.x1)/2)-500,parseInt((a.y2+a.y1)/2)-500];return(n.sequence?"ð €"+n.sequence.join(""):"")+n.box+e([f[0]-d[0],f[1]-d[1]])+n.spatials.map((t=>t.symbol+e([t.coord[0]-d[0],t.coord[1]-d[1]]))).join("")+(n.style||"")}},t.signPng=t=>{const e=function(t){const e=z(t);if(e.spatials){const t=document.createElement("canvas"),n=t.getContext("2d");let o=g(e.style);o.detailsym&&o.detailsym.forEach((t=>{e.spatials[t.index-1]&&(e.spatials[t.index-1].detail=t.detail)}));let i=Math.min(...e.spatials.map((t=>t.coord[0]))),r=Math.min(...e.spatials.map((t=>t.coord[1]))),s=e.max[0],l=e.max[1];o.padding&&(i-=o.padding,r-=o.padding,s+=o.padding,l+=o.padding);let c=1;"x"!=o.zoom&&(c=o.zoom);let d=(s-i)*c,u=(l-r)*c;t.width=d||1,t.height=u||1,o.background&&(n.rect(0,0,d,u),n.fillStyle=o.background,n.fill());const $=o.detail&&o.detail[0]||"black",p=o.detail&&o.detail[1]||"white";return e.spatials.forEach((t=>{let e=$;t.detail?e=t.detail[0]:o.colorize&&(e=k(t.symbol));let s=p;t.detail&&t.detail[1]&&(s=t.detail[1]),n.font=30*c+"px 'SuttonSignWritingFill'",n.fillStyle=s,n.fillText(f(t.symbol),(t.coord[0]-i)*c,(t.coord[1]-r)*c),n.font=30*c+"px 'SuttonSignWritingLine'",n.fillStyle=e,n.fillText(a(t.symbol),(t.coord[0]-i)*c,(t.coord[1]-r)*c)})),t}}(t),n=e.toDataURL("image/png");return e.remove(),n},t.signSvg=t=>{let e=z(t);if(e.spatials){let n=g(e.style),o=Math.min(...e.spatials.map((t=>t.coord[0]))),i=Math.min(...e.spatials.map((t=>t.coord[1]))),r=e.max[0],s=e.max[1],l="";n.classes&&(l=` class="${n.classes}"`);let c="";n.id&&(c=` id="${n.id}"`),n.padding&&(o-=n.padding,i-=n.padding,r+=n.padding,s+=n.padding);let a="";"x"!=n.zoom&&(a=` width="${(r-o)*(n.zoom?n.zoom:1)}" height="${(s-i)*(n.zoom?n.zoom:1)}"`);let f=`<svg${l}${c} version="1.1" xmlns="http://www.w3.org/2000/svg"${a} viewBox="${o} ${i} ${r-o} ${s-i}">\n`;return f+=R(t),f+="\n</svg>",f}return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>'},t.signSvgBody=R,t.symbolFill=f,t.symbolLine=a,t.symbolNormalize=t=>{const n=b(t);if(!n.symbol)return null;{let t=s(n.symbol);if(t)return`${n.symbol}${e([500-parseInt((t[0]+1)/2),500-parseInt((t[1]+1)/2)])}${n.style||""}`}},t.symbolPng=t=>{const e=function(t){const e=b(t);if(e.symbol){let t=s(e.symbol);if(t){const n=document.createElement("canvas"),o=n.getContext("2d");let i=g(e.style),r="black";i.colorize?r=k(e.symbol):i.detail&&(r=i.detail[0]);let s=i.detail&&i.detail[1]||"white",l=500,c=l+t[0],d=500,u=d+t[1];i.padding&&(l-=i.padding,d-=i.padding,c+=i.padding,u+=i.padding);let $=1;"x"!=i.zoom&&($=i.zoom);let p=(c-l)*$,v=(u-d)*$;return n.width=p||1,n.height=v||1,i.background&&(o.rect(0,0,p,v),o.fillStyle=i.background,o.fill()),o.font=30*$+"px 'SuttonSignWritingFill'",o.fillStyle=s,o.fillText(f(e.symbol),(500-l)*$,(500-d)*$),o.font=30*$+"px 'SuttonSignWritingLine'",o.fillStyle=r,o.fillText(a(e.symbol),(500-l)*$,(500-d)*$),n}}}(t),n=e.toDataURL("image/png");return e.remove(),n},t.symbolSize=s,t.symbolSvg=t=>{const e=b(t),n='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1" height="1"></svg>';if(!e.symbol)return n;let o,i,r,l,c=g(e.style);if(e.coord)o=e.coord[0],i=e.coord[1],r=500-o+500,l=500-i+500;else{let t=s(e.symbol);if(!t)return n;o=parseInt(500-t[0]/2),i=parseInt(500-t[1]/2),r=o+t[0],l=i+t[1]}let a="";c.classes&&(a=` class="${c.classes}"`);let f="";c.id&&(f=` id="${c.id}"`),c.padding&&(o-=c.padding,i-=c.padding,r+=c.padding,l+=c.padding);let d="";return"x"!=c.zoom&&(d=` width="${(r-o)*(c.zoom?c.zoom:1)}" height="${(l-i)*(c.zoom?c.zoom:1)}"`),`<svg${a}${f} version="1.1" xmlns="http://www.w3.org/2000/svg"${d} viewBox="${o} ${i} ${r-o} ${l-i}">\n${E(t)}\n</svg>`},t.symbolSvgBody=E,t.symbolText=d,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));export{o as a,n as s}