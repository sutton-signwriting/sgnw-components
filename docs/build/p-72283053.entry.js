/*!
 * The Sutton SignWriting Web Components
 */
import{r as t,h as s,H as e,g as i}from"./p-7486a92a.js";import{c as a,H as l,C as h,A as n,a as r,b as c,d as g}from"./p-66ae5418.js";import{d as o,p,b as w,h as m}from"./p-79ff7b68.js";const u=class{constructor(s){t(this,s),this.orientation="vertical",this.major=10,this.minor=3,this.total=30,this.size="small",this.alphabet=o,this.group=null,this.base=null,this.more=!1,this.hasMore=!1,this.lower=!1,this.hasLower=!1,this.palette=[]}parseSizeProp(t){switch(t){case"large":this.major=16,this.minor=6;break;case"medium":this.major=10,this.minor=6;break;case"small":default:this.major=10,this.minor=3}this.total=this.major*this.minor}watchGroup(){null==this.group&&null!=this.base?this.base=null:this.setPalette()}watchBase(){this.setPalette()}watchMore(){this.setPalette()}watchLower(){this.setPalette()}getPaletteAll(){let t=Object.keys(this.alphabet);return"large"==this.size&&(t=p(t,10,16)),t=w(t,this.total),this.more=!1,this.hasMore=!1,this.lower=!1,this.hasLower=!1,t}getPaletteGroup(){let t=this.alphabet[this.group];return"large"==this.size&&(t=p(t,10,16)),t=w(t,this.total),t.length>this.total?(this.hasMore=!0,t=this.more?t.slice(this.total,2*this.total):t.slice(0,this.total)):(this.more=!1,this.hasMore=!1),this.lower=!1,this.hasLower=!1,t}getPaletteBase(){const t=a.swu2key(this.base).slice(0,4);let s;const e=t+"18",i=t+"30";let l=0,h=16,n=0,r=6;"large"!=this.size&&(this.hasLower=m(a.key2id(t+"08"))||m(a.key2id(e)),this.lower?l=8:h=8),"small"==this.size&&(this.hasMore=m(a.key2id(i)),this.more?n=3:r=3);let c=[];for(var g=n;g<r;g++)for(var o=l;o<h;o++)s=t+g+o.toString(16),c.push(a.key2swu(s));return"large"!=this.size&&(c=p(c,8,10)),c}setPalette(){let t;switch(!0){case!this.group:t=this.getPaletteAll();break;case!!this.group&&!!this.base:t=this.getPaletteBase();break;case!!this.group:t=this.getPaletteGroup()}this.palette=[...t]}paletteSymbolClickHandler(t){switch(!0){case!this.group:this.group=t.detail;break;case!!this.group&&!!this.base:break;case!!this.group:this.base=t.detail,this.more=!1}}componentWillLoad(){"string"==typeof this.alphabet&&(this.alphabet=JSON.parse(this.alphabet)),this.parseSizeProp(this.size),this.setPalette()}render(){return s(e,{class:this.orientation+" "+this.size},s("nav",null,s("sgnw-button",{svg:l,onClick:()=>{this.group=null}}),this.group?s("sgnw-button",{svg:h,onClick:()=>{this.base?(this.base=null,this.more=null):this.group=null}}):s("div",null),this.hasMore?s("sgnw-button",{svg:this.more?n:r,onClick:()=>{this.more=!this.more}}):"small"==this.size?s("div",null):null,this.hasLower?s("sgnw-button",{svg:this.lower?c:g,onClick:()=>{this.lower=!this.lower}}):"large"!=this.size?s("div",null):null),s("main",null,this.palette.map((t=>s("sgnw-palette-symbol",{symbol:t})))))}get el(){return i(this)}static get watchers(){return{size:["parseSizeProp"],group:["watchGroup"],base:["watchBase"],more:["watchMore"],lower:["watchLower"]}}};u.style=".sc-sgnw-palette-h{width:100%;height:100%;display:flex}.sc-sgnw-palette-h nav.sc-sgnw-palette{height:100%;width:100%;flex:0 0 10%;display:flex;align-items:center}.sc-sgnw-palette-h nav.sc-sgnw-palette fsw-button.sc-sgnw-palette,.sc-sgnw-palette-h nav.sc-sgnw-palette div.sc-sgnw-palette{flex:25%;height:100%;width:100%;margin:1%}.sc-sgnw-palette-h main.sc-sgnw-palette{flex:0 0 90%;width:100%;height:100%;display:grid}.horizontal.sc-sgnw-palette-h{flex-direction:row}.horizontal.sc-sgnw-palette-h nav.sc-sgnw-palette{flex-direction:column}.horizontal.small.sc-sgnw-palette-h main.sc-sgnw-palette{grid-template-columns:repeat(10,1fr)}.horizontal.medium.sc-sgnw-palette-h main.sc-sgnw-palette{grid-template-columns:repeat(10,1fr)}.horizontal.large.sc-sgnw-palette-h main.sc-sgnw-palette{grid-template-columns:repeat(16,1fr)}.vertical.sc-sgnw-palette-h{flex-direction:column}.vertical.sc-sgnw-palette-h nav.sc-sgnw-palette{flex-direction:row}.vertical.sc-sgnw-palette-h main.sc-sgnw-palette{grid-auto-flow:column}.vertical.small.sc-sgnw-palette-h main.sc-sgnw-palette{grid-template-rows:repeat(10,1fr)}.vertical.medium.sc-sgnw-palette-h main.sc-sgnw-palette{grid-template-rows:repeat(10,1fr)}.vertical.large.sc-sgnw-palette-h main.sc-sgnw-palette{grid-template-rows:repeat(16,1fr)}";export{u as sgnw_palette}