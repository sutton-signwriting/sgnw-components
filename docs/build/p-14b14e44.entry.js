/*!
 * The Sutton SignWriting Web Components
 */
import{r as t,h as i,H as s,g as e}from"./p-b65461bb.js";import{f as n}from"./p-ac820851.js";import{s as o}from"./p-7eef903c.js";const r=class{constructor(i){t(this,i),this.sgnw=window.sgnw,this.items=[]}parseText(t){const i=`${n.re.sign}(${o.re.full})?`,s=new RegExp(i),e=`${n.re.spatial}(${o.re.full})?`,r=new RegExp(e),p="<img.*?>",a=new RegExp(p);let l=t.match(new RegExp(`(${i}|${e}|${p}|.)`,"g")),d=[],h="",g="";for(let t of l)s.test(t)?g="sign":r.test(t)?g="spatial":a.test(t)?g="img":(g="other",h+=t),"other"!=g&&(h&&" "!=h&&d.push({other:h}),h="",d.push("sign"==g||"spatial"==g?{[g]:t,info:n.info(t)}:{[g]:t}));h&&" "!=h&&d.push({other:h}),this.items=d}connectedCallback(){if(this.vp=this.el.innerHTML,!this.sgnw){let t=this;window.addEventListener("sgnw",(function i(){t.sgnw=window.sgnw,window.removeEventListener("sgnw",i,!1)}),!1)}}render(){return i(s,{vp:this.vp},i("span",null,this.items.map((t=>t.sign?(t.info.right=500-parseInt(t.info.width)/2-parseInt(t.info.minX),i("fsw-sign",{style:{width:t.info.width+"px",height:t.info.height+"px",right:t.info.right+"px"}},t.sign)):t.spatial?(t.info.right=500-parseInt(t.info.minX),i("fsw-symbol",{style:{width:t.info.width+"px",height:t.info.height+"px"}},t.spatial)):t.img?i("div",{innerHTML:t.img}):i("div",null,t.other)))))}get el(){return e(this)}static get watchers(){return{vp:["parseText"]}}};r.style=":host{writing-mode:vertical-lr;border-left:1px solid blue;height:100%;font-size:0px;flex-wrap:wrap;justify-content:flex-start}:host span{border-left:1px dashed red}div{writing-mode:horizontal-tb;display:inline-block;padding:10px}fsw-sign,fsw-symbol{writing-mode:horizontal-tb;display:inline-block;vertical-align:middle;box-sizing:content-box;position:relative}fsw-sign{padding:20px}fsw-symbol{padding-bottom:20px}";export{r as fsw_vp}